{"ast":null,"code":"var _jsxFileName = \"/Users/Pajamas/Project/tetris/src/components/Tetris/Preview.js\",\n  _s = $RefreshSig$();\nimport { styled } from \"styled-components\";\nimport React from \"react\";\nimport { useEffect, useRef } from \"react\";\nimport PreviewCell from \"./PreviewCell\";\nimport { TETROMINOS } from \"../../constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Preview = _ref => {\n  _s();\n  let {\n    queue\n  } = _ref;\n  const grid = Array.from({\n    length: 4\n  }, () => new Array(4).fill(0));\n  const shapeRef = useRef(0);\n  useEffect(() => {\n    if (queue.isEmpty()) {\n      queue.init();\n    }\n    shapeRef.current = queue.items[queue.items.length - 1];\n  }, [queue, queue.items.length]);\n  const arr = TETROMINOS[shapeRef.current].shape;\n  const color = TETROMINOS[shapeRef.current].color;\n  console.log('re-render');\n  return arr.length < 1 ? null : /*#__PURE__*/_jsxDEV(StyledPreview, {\n    children: grid.map((row, x) => row.map((cell, y) => {\n      const isFilled = arr[x] && arr[x][y] !== 0;\n      return /*#__PURE__*/_jsxDEV(PreviewCell, {\n        filled: isFilled,\n        color: color\n      }, `${x}-${y}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 28\n      }, this);\n      // return <PreviewCell x={x} y={y} />\n    }))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 9\n  }, this);\n};\n_s(Preview, \"GSryMeSrwpJnhm2/ueQ3bVkM4nc=\");\n_c = Preview;\nexport default Preview;\nconst StyledPreview = styled.div`\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    grid-template-rows: repeat(4, 1fr);\n    box-sizing: content-box;\n    background-color: transparent;\n    width: 100px;\n    height: 100px;\n    /* border: 2px solid #111; */\n\n    div {\n        display: inline;\n        width: auto;\n\n        /* border: 1px solid aliceblue; */\n    }\n`;\n_c2 = StyledPreview;\nvar _c, _c2;\n$RefreshReg$(_c, \"Preview\");\n$RefreshReg$(_c2, \"StyledPreview\");","map":{"version":3,"names":["styled","React","useEffect","useRef","PreviewCell","TETROMINOS","jsxDEV","_jsxDEV","Preview","_ref","_s","queue","grid","Array","from","length","fill","shapeRef","isEmpty","init","current","items","arr","shape","color","console","log","StyledPreview","children","map","row","x","cell","y","isFilled","filled","fileName","_jsxFileName","lineNumber","columnNumber","_c","div","_c2","$RefreshReg$"],"sources":["/Users/Pajamas/Project/tetris/src/components/Tetris/Preview.js"],"sourcesContent":["import { styled } from \"styled-components\";\n\nimport React from \"react\";\nimport { useEffect, useRef } from \"react\";\n\nimport PreviewCell from \"./PreviewCell\";\nimport { TETROMINOS } from \"../../constants\";\n\n\nconst Preview = ({queue}) => {\n    const grid = Array.from({length: 4}, () => new Array(4).fill(0));\n\n    const shapeRef = useRef(0);\n\n    useEffect(() => {\n        if(queue.isEmpty()) {\n            queue.init();\n        }\n        shapeRef.current = queue.items[queue.items.length-1];\n    }, [queue, queue.items.length]);\n\n\n    const arr = TETROMINOS[shapeRef.current].shape;\n    const color = TETROMINOS[shapeRef.current].color;\n    console.log('re-render');\n    return (\n        arr.length < 1 ? null : \n        <StyledPreview>\n            {grid.map((row, x) =>\n                row.map((cell, y) => {\n                    const isFilled = arr[x] && arr[x][y] !== 0;\n                    return <PreviewCell key={`${x}-${y}`} filled={isFilled} color={color} />;\n                    // return <PreviewCell x={x} y={y} />\n                })\n            )}\n        </StyledPreview>\n    );\n}\n\nexport default Preview;\n\nconst StyledPreview = styled.div`\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    grid-template-rows: repeat(4, 1fr);\n    box-sizing: content-box;\n    background-color: transparent;\n    width: 100px;\n    height: 100px;\n    /* border: 2px solid #111; */\n\n    div {\n        display: inline;\n        width: auto;\n\n        /* border: 1px solid aliceblue; */\n    }\n`"],"mappings":";;AAAA,SAASA,MAAM,QAAQ,mBAAmB;AAE1C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAEzC,OAAOC,WAAW,MAAM,eAAe;AACvC,SAASC,UAAU,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAG7C,MAAMC,OAAO,GAAGC,IAAA,IAAa;EAAAC,EAAA;EAAA,IAAZ;IAACC;EAAK,CAAC,GAAAF,IAAA;EACpB,MAAMG,IAAI,GAAGC,KAAK,CAACC,IAAI,CAAC;IAACC,MAAM,EAAE;EAAC,CAAC,EAAE,MAAM,IAAIF,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC,CAAC,CAAC,CAAC;EAEhE,MAAMC,QAAQ,GAAGd,MAAM,CAAC,CAAC,CAAC;EAE1BD,SAAS,CAAC,MAAM;IACZ,IAAGS,KAAK,CAACO,OAAO,CAAC,CAAC,EAAE;MAChBP,KAAK,CAACQ,IAAI,CAAC,CAAC;IAChB;IACAF,QAAQ,CAACG,OAAO,GAAGT,KAAK,CAACU,KAAK,CAACV,KAAK,CAACU,KAAK,CAACN,MAAM,GAAC,CAAC,CAAC;EACxD,CAAC,EAAE,CAACJ,KAAK,EAAEA,KAAK,CAACU,KAAK,CAACN,MAAM,CAAC,CAAC;EAG/B,MAAMO,GAAG,GAAGjB,UAAU,CAACY,QAAQ,CAACG,OAAO,CAAC,CAACG,KAAK;EAC9C,MAAMC,KAAK,GAAGnB,UAAU,CAACY,QAAQ,CAACG,OAAO,CAAC,CAACI,KAAK;EAChDC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;EACxB,OACIJ,GAAG,CAACP,MAAM,GAAG,CAAC,GAAG,IAAI,gBACrBR,OAAA,CAACoB,aAAa;IAAAC,QAAA,EACThB,IAAI,CAACiB,GAAG,CAAC,CAACC,GAAG,EAAEC,CAAC,KACbD,GAAG,CAACD,GAAG,CAAC,CAACG,IAAI,EAAEC,CAAC,KAAK;MACjB,MAAMC,QAAQ,GAAGZ,GAAG,CAACS,CAAC,CAAC,IAAIT,GAAG,CAACS,CAAC,CAAC,CAACE,CAAC,CAAC,KAAK,CAAC;MAC1C,oBAAO1B,OAAA,CAACH,WAAW;QAAmB+B,MAAM,EAAED,QAAS;QAACV,KAAK,EAAEA;MAAM,GAA3C,GAAEO,CAAE,IAAGE,CAAE,EAAC;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAmC,CAAC;MACxE;IACJ,CAAC,CACL;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACU,CAAC;AAExB,CAAC;AAAA7B,EAAA,CA5BKF,OAAO;AAAAgC,EAAA,GAAPhC,OAAO;AA8Bb,eAAeA,OAAO;AAEtB,MAAMmB,aAAa,GAAG3B,MAAM,CAACyC,GAAI;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAAC,GAAA,GAhBKf,aAAa;AAAA,IAAAa,EAAA,EAAAE,GAAA;AAAAC,YAAA,CAAAH,EAAA;AAAAG,YAAA,CAAAD,GAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}